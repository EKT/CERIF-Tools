<?xml version="1.0" encoding="UTF-8"?>

<CERIF xmlns="urn:xmlns:org:eurocris:cerif-1.5-1" 
		xsi:schemaLocation="urn:xmlns:org:eurocris:cerif-1.5-1 http://www.eurocris.org/Uploads/Web%20pages/CERIF-1.5/CERIF_1.5_1.xsd" 
		xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
		release="1.5" 
		date=$esc.quote$date.format('yyyy-MM-dd',$xmlDate)$esc.quote 
		sourceDatabase=$esc.quote$xmlSourceDatabase$esc.quote >	


#foreach( $project in $projects )
<!-- A project record -->
<cfProj>
	<cfProjId>$project.id</cfProjId>
#if ($project.startDate && $project.startDate != "")
	<cfStartDate>$date.format('yyyy-MM-dd',$project.startDate)</cfStartDate>
#end
#if ($project.endDate && $project.endDate != "")
	<cfEndDate>$date.format('yyyy-MM-dd',$project.endDate)</cfEndDate>
#end
#if ($project.acronym && $project.acronym != "")
	<cfAcro>$cerif.xml($project.acronym)</cfAcro>
#end
#if ($project.uri && $project.uri != "")
	<cfURI>$cerif.xml($project.uri)</cfURI>
#end
#foreach( $projectTitle in $project.projectTitles )
#if( $projectTitle.translation == "HUMAN" )
#set ($trans = "h")
#elseif( $projectTitle.translation == "ORIGINAL" )
#set ($trans = "o")
#else
#set ($trans = "m")
#end
	<cfTitle cfLangCode=$esc.quote$projectTitle.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($projectTitle.title)</cfTitle>
#end
#foreach( $projectKeyword in $project.projectKeywords )
#if( $projectKeyword.translation == "HUMAN" )
#set ($trans = "h")
#elseif( $projectKeyword.translation == "ORIGINAL" )
#set ($trans = "o")
#else
#set ($trans = "m")
#end
	<cfKeyw cfLangCode=$esc.quote$projectKeyword.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($projectKeyword.keyword)</cfKeyw>
#end

#foreach( $projectClass in $project.projects_classes )
	<cfProj_Class>
		<cfClassId>$projectClass.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$projectClass.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$projectClass.startDate)T$date.format('HH:mm:ss',$projectClass.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$projectClass.endDate)T$date.format('HH:mm:ss',$projectClass.endDate)</cfEndDate>
#if ($projectClass.fraction)
		<cfFraction>$projectClass.fraction</cfFraction>
#end
	</cfProj_Class>
	
#end
#foreach( $projectFund in $project.projects_fundings )
	<cfProj_Fund>
		<cfFundId>$projectFund.funding.id</cfFundId>		
		<cfClassId>$projectFund.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$projectFund.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$projectFund.startDate)T$date.format('HH:mm:ss',$projectFund.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$projectFund.endDate)T$date.format('HH:mm:ss',$projectFund.endDate)</cfEndDate>
#if ($projectFund.fraction)
		<cfFraction>$projectFund.fraction</cfFraction>
#end
#if ($projectFund.amount)
#if (!$projectFund.currency.code)
#set ($currency = "default")
#else
#set ($currency = $projectFund.currency.code)
#end
		<cfAmount cfCurrCode=$esc.quote$currency$esc.quote>$projectFund.amount</cfAmount>
#end
	</cfProj_Fund>
	
#end
#foreach( $projectOrgUnit in $project.organisationUnits )
	<cfProj_OrgUnit>
		<cfOrgUnitId>$projectOrgUnit.organisationUnit.id</cfOrgUnitId>		
		<cfClassId>$projectOrgUnit.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$projectOrgUnit.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$projectOrgUnit.startDate)T$date.format('HH:mm:ss',$projectOrgUnit.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$projectOrgUnit.endDate)T$date.format('HH:mm:ss',$projectOrgUnit.endDate)</cfEndDate>
#if ($projectOrgUnit.fraction)
		<cfFraction>$projectOrgUnit.fraction</cfFraction>
#end
	</cfProj_OrgUnit>
	
#end	
#foreach( $projectPers in $project.persons )
	<cfProj_Pers>
		<cfPersId>$projectPers.person.id</cfPersId>		
		<cfClassId>$projectPers.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$projectPers.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$projectPers.startDate)T$date.format('HH:mm:ss',$projectPers.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$projectPers.endDate)T$date.format('HH:mm:ss',$projectPers.endDate)</cfEndDate>
#if ($projectPers.fraction)
		<cfFraction>$projectPers.fraction</cfFraction>
#end
	</cfProj_Pers>
	
#end
#foreach( $projectResProd in $project.projects_resultProducts )
	<cfProj_ResProd>
		<cfResProdId>$projectResProd.resultProduct.id</cfResProdId>		
		<cfClassId>$projectResProd.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$projectResProd.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$projectResProd.startDate)T$date.format('HH:mm:ss',$projectResProd.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$projectResProd.endDate)T$date.format('HH:mm:ss',$projectResProd.endDate)</cfEndDate>
#if ($projectResProd.fraction)
		<cfFraction>$projectResProd.fraction</cfFraction>
#end
	</cfProj_ResProd>
	
#end
#foreach( $projectRespubl in $project.projects_resultPublications )
	<cfProj_ResPubl>
		<cfResPublId>$projectRespubl.resultPublication.id</cfResPublId>		
		<cfClassId>$projectRespubl.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$projectRespubl.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$projectRespubl.startDate)T$date.format('HH:mm:ss',$projectRespubl.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$projectRespubl.endDate)T$date.format('HH:mm:ss',$projectRespubl.endDate)</cfEndDate>
#if ($projectRespubl.fraction)
		<cfFraction>$projectRespubl.fraction</cfFraction>
#end
#if ($projectRespubl.copyright)
		<cfCopyright>$projectRespubl.copyright</cfCopyright>
#end
	</cfProj_ResPubl>
	
#end
#foreach( $projFederatedIdentifiers in $project.federatedIdentifiers )
	<cfFedId>
		<cfFedIdId>$projFederatedIdentifiers.id</cfFedIdId>
#if ($projFederatedIdentifiers.fedId && $projFederatedIdentifiers.fedId != "")
		<cfFedId>$cerif.xml($projFederatedIdentifiers.fedId)</cfFedId>
#end
#if ($projFederatedIdentifiers.theClass)
		<cfClassId>$projFederatedIdentifiers.theClass.uuid</cfClassId>
#end
#if ($projFederatedIdentifiers.scheme)
		<cfClassSchemeId>$projFederatedIdentifiers.scheme.uuid</cfClassSchemeId>
#end
#if ($projFederatedIdentifiers.startDate)
		<cfStartDate>$date.format('yyyy-MM-dd',$projFederatedIdentifiers.startDate)T$date.format('HH:mm:ss',$projFederatedIdentifiers.startDate)</cfStartDate>
#end
#if ($projFederatedIdentifiers.endDate)
		<cfEndDate>$date.format('yyyy-MM-dd',$projFederatedIdentifiers.endDate)T$date.format('HH:mm:ss',$projFederatedIdentifiers.endDate)</cfEndDate>
#end
	
#foreach( $federatedIdentifierClass in $projFederatedIdentifiers.fedIds_classes )
		<cfFedId_Class>
			<cfClassId>$federatedIdentifierClass.theClass.uuid</cfClassId>	
			<cfClassSchemeId>$federatedIdentifierClass.theClass.scheme.uuid</cfClassSchemeId>
			<cfStartDate>$date.format('yyyy-MM-dd',$federatedIdentifierClass.startDate)T$date.format('HH:mm:ss',$federatedIdentifierClass.startDate)</cfStartDate>
			<cfEndDate>$date.format('yyyy-MM-dd',$federatedIdentifierClass.endDate)T$date.format('HH:mm:ss',$federatedIdentifierClass.endDate)</cfEndDate>
#if ($federatedIdentifierClass.fraction)
			<cfFraction>$federatedIdentifierClass.fraction</cfFraction>
#end
		</cfFedId_Class>
		
#end
#foreach( $federatedIdentifierService in $projFederatedIdentifiers.services_fedIds )
		<cfFedId_Srv>
		 	<cfSrvId>$federatedIdentifierService.service.id</cfSrvId>
			<cfClassId>$federatedIdentifierService.theClass.uuid</cfClassId>	
			<cfClassSchemeId>$federatedIdentifierService.theClass.scheme.uuid</cfClassSchemeId>
			<cfStartDate>$date.format('yyyy-MM-dd',$federatedIdentifierService.startDate)T$date.format('HH:mm:ss',$federatedIdentifierService.startDate)</cfStartDate>
			<cfEndDate>$date.format('yyyy-MM-dd',$federatedIdentifierService.endDate)T$date.format('HH:mm:ss',$federatedIdentifierService.endDate)</cfEndDate>
#if ($federatedIdentifierService.fraction)
			<cfFraction>$federatedIdentifierService.fraction</cfFraction>
#end
		</cfFedId_Srv>
		
#end
	</cfFedId>
	
#end
</cfProj>

#end

#foreach( $organisation in $organisations )
<!-- An organisation record -->
<cfOrgUnit>
	<cfOrgUnitId>$organisation.id</cfOrgUnitId>
#if ($organisation.acronym && $organisation.acronym != "")
	<cfAcro>$cerif.xml($organisation.acronym)</cfAcro>
#end
#if ($organisation.uri && $organisation.uri != "")
	<cfURI>$cerif.xml($organisation.uri)</cfURI>
#end
#foreach( $organisationUnitName in $organisation.organisationUnitNames )
#if( $organisationUnitName.translation == "HUMAN" )
#set ($trans = "h")
#elseif( $organisationUnitName.translation == "ORIGINAL" )
#set ($trans = "o")
#else
#set ($trans = "m")
#end
	<cfName cfLangCode=$esc.quote$organisationUnitName.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($organisationUnitName.name)</cfName>
#end

#foreach( $organisationClass in $organisation.classes )
	<cfOrgUnit_Class>
		<cfClassId>$organisationClass.theClass.uuid</cfClassId>	
		<cfClassSchemeId>$organisationClass.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$organisationClass.startDate)T$date.format('HH:mm:ss',$organisationClass.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$organisationClass.endDate)T$date.format('HH:mm:ss',$organisationClass.endDate)</cfEndDate>
#if ($organisationClass.fraction)
		<cfFraction>$organisationClass.fraction</cfFraction>
#end
	</cfOrgUnit_Class>
	
#end
#foreach( $organisationFund in $organisation.organisationUnits_fundings )
	<cfOrgUnit_Fund>
		<cfFundId>$organisationFund.funding.id</cfFundId>		
		<cfClassId>$organisationFund.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$organisationFund.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$organisationFund.startDate)T$date.format('HH:mm:ss',$organisationFund.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$organisationFund.endDate)T$date.format('HH:mm:ss',$organisationFund.endDate)</cfEndDate>
#if ($organisationFund.fraction)
		<cfFraction>$organisationFund.fraction</cfFraction>
#end
#if ($organisationFund.amount)
#if (!$organisationFund.currency.code)
#set ($currency = "default")
#else
#set ($currency = $organisationFund.currency.code)
#end
		<cfAmount cfCurrCode=$esc.quote$currency$esc.quote>$organisationFund.amount</cfAmount>
#end
	</cfOrgUnit_Fund>
	
#end
#foreach( $organisationResProd in $organisation.organisationUnits_resultProducts )
	<cfOrgUnit_ResProd>
		<cfResProdId>$organisationResProd.resultProduct.id</cfResProdId>		
		<cfClassId>$organisationResProd.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$organisationResProd.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$organisationResProd.startDate)T$date.format('HH:mm:ss',$organisationResProd.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$organisationResProd.endDate)T$date.format('HH:mm:ss',$organisationResProd.endDate)</cfEndDate>
#if ($organisationResProd.fraction)
		<cfFraction>$organisationResProd.fraction</cfFraction>
#end
#if ($organisationResProd.availability)
		<cfAvailability>$organisationResProd.availability</cfAvailability>
#end
#if ($organisationResProd.conditions)
		<cfConditions>$organisationResProd.conditions</cfConditions>
#end
#if ($organisationResProd.price)
#if (!$organisationResProd.currency.code)
#set ($currency = "default")
#else
#set ($currency = $organisationResProd.currency.code)
#end
		<cfPrice cfCurrCode=$esc.quote$currency$esc.quote>$organisationResProd.price</cfPrice>
#end
	</cfOrgUnit_ResProd>
	
#end
#foreach( $organisationRespubl in $organisation.organisationUnits_resultPublications )
	<cfOrgUnit_ResPubl>
		<cfResPublId>$organisationRespubl.resultPublication.id</cfResPublId>		
		<cfClassId>$organisationRespubl.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$organisationRespubl.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$organisationRespubl.startDate)T$date.format('HH:mm:ss',$organisationRespubl.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$organisationRespubl.endDate)T$date.format('HH:mm:ss',$organisationRespubl.endDate)</cfEndDate>
#if ($organisationRespubl.fraction)
		<cfFraction>$organisationRespubl.fraction</cfFraction>
#end
#if ($organisationRespubl.copyright)
		<cfCopyright>$organisationRespubl.copyright</cfCopyright>
#end
	</cfOrgUnit_ResPubl>
	
#end
#foreach( $organisationPers in $organisation.persons_organisationUnits )
	<cfPers_OrgUnit>
		<cfPersId>$organisationPers.person.id</cfPersId>		
		<cfClassId>$organisationPers.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$organisationPers.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$organisationPers.startDate)T$date.format('HH:mm:ss',$organisationPers.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$organisationPers.endDate)T$date.format('HH:mm:ss',$organisationPers.endDate)</cfEndDate>
#if ($organisationPers.fraction)
		<cfFraction>$organisationPers.fraction</cfFraction>
#end
	</cfPers_OrgUnit>
	
#end
#foreach( $organisationProject in $organisation.projects )
	<cfProj_OrgUnit>
		<cfProjId>$organisationProject.project.id</cfProjId>		
		<cfClassId>$organisationProject.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$organisationProject.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$organisationProject.startDate)T$date.format('HH:mm:ss',$organisationProject.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$organisationProject.endDate)T$date.format('HH:mm:ss',$organisationProject.endDate)</cfEndDate>
#if ($organisationProject.fraction)
		<cfFraction>$organisationProject.fraction</cfFraction>
#end
	</cfProj_OrgUnit>
	
#end
#foreach( $orgFederatedIdentifiers in $organisation.federatedIdentifiers )
	<cfFedId>
		<cfFedIdId>$orgFederatedIdentifiers.id</cfFedIdId>
#if ($orgFederatedIdentifiers.fedId && $orgFederatedIdentifiers.fedId != "")
		<cfFedId>$cerif.xml($orgFederatedIdentifiers.fedId)</cfFedId>
#end
#if ($orgFederatedIdentifiers.theClass)
		<cfClassId>$orgFederatedIdentifiers.theClass.uuid</cfClassId>
#end
#if ($orgFederatedIdentifiers.scheme)
		<cfClassSchemeId>$orgFederatedIdentifiers.scheme.uuid</cfClassSchemeId>
#end
#if ($orgFederatedIdentifiers.startDate)
		<cfStartDate>$date.format('yyyy-MM-dd',$orgFederatedIdentifiers.startDate)T$date.format('HH:mm:ss',$orgFederatedIdentifiers.startDate)</cfStartDate>
#end
#if ($orgFederatedIdentifiers.endDate)
		<cfEndDate>$date.format('yyyy-MM-dd',$orgFederatedIdentifiers.endDate)T$date.format('HH:mm:ss',$orgFederatedIdentifiers.endDate)</cfEndDate>
#end
	
#foreach( $federatedIdentifierClass in $orgFederatedIdentifiers.fedIds_classes )
		<cfFedId_Class>
			<cfClassId>$federatedIdentifierClass.theClass.uuid</cfClassId>	
			<cfClassSchemeId>$federatedIdentifierClass.theClass.scheme.uuid</cfClassSchemeId>
			<cfStartDate>$date.format('yyyy-MM-dd',$federatedIdentifierClass.startDate)T$date.format('HH:mm:ss',$federatedIdentifierClass.startDate)</cfStartDate>
			<cfEndDate>$date.format('yyyy-MM-dd',$federatedIdentifierClass.endDate)T$date.format('HH:mm:ss',$federatedIdentifierClass.endDate)</cfEndDate>
#if ($federatedIdentifierClass.fraction)
			<cfFraction>$federatedIdentifierClass.fraction</cfFraction>
#end
		</cfFedId_Class>
		
#end
#foreach( $federatedIdentifierService in $orgFederatedIdentifiers.services_fedIds )
		<cfFedId_Srv>
		 	<cfSrvId>$federatedIdentifierService.service.id</cfSrvId>
			<cfClassId>$federatedIdentifierService.theClass.uuid</cfClassId>	
			<cfClassSchemeId>$federatedIdentifierService.theClass.scheme.uuid</cfClassSchemeId>
			<cfStartDate>$date.format('yyyy-MM-dd',$federatedIdentifierService.startDate)T$date.format('HH:mm:ss',$federatedIdentifierService.startDate)</cfStartDate>
			<cfEndDate>$date.format('yyyy-MM-dd',$federatedIdentifierService.endDate)T$date.format('HH:mm:ss',$federatedIdentifierService.endDate)</cfEndDate>
#if ($federatedIdentifierService.fraction)
			<cfFraction>$federatedIdentifierService.fraction</cfFraction>
#end
		</cfFedId_Srv>
		
#end
	</cfFedId>
	
#end
</cfOrgUnit>

#end

#foreach( $person in $persons )
<!-- A person record -->
<cfPers>
	<cfPersId>$person.id</cfPersId>

#foreach( $personEAddress in $person.persons_electronicAddresses )
	<cfPers_EAddr>
		<cfEAddrId>$personEAddress.electronicAddress.id</cfEAddrId>		
		<cfClassId>$personEAddress.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$personEAddress.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$personEAddress.startDate)T$date.format('HH:mm:ss',$personEAddress.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$personEAddress.endDate)T$date.format('HH:mm:ss',$personEAddress.endDate)</cfEndDate>
#if ($personEAddress.fraction)
		<cfFraction>$personEAddress.fraction</cfFraction>
#end
	</cfPers_EAddr>
	
#end
#foreach( $persClass in $person.classes )
	<cfPers_Class>
		<cfClassId>$persClass.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$persClass.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$persClass.startDate)T$date.format('HH:mm:ss',$persClass.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$persClass.endDate)T$date.format('HH:mm:ss',$persClass.endDate)</cfEndDate>
#if ($persClass.fraction)
		<cfFraction>$persClass.fraction</cfFraction>
#end
	</cfPers_Class>
	
#end
#foreach( $organisationPers in $person.persons_organisationUnits )
	<cfPers_OrgUnit>
		<cfOrgUnitId>$organisationPers.organisationUnit.id</cfOrgUnitId>		
		<cfClassId>$organisationPers.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$organisationPers.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$organisationPers.startDate)T$date.format('HH:mm:ss',$organisationPers.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$organisationPers.endDate)T$date.format('HH:mm:ss',$organisationPers.endDate)</cfEndDate>
#if ($organisationPers.fraction)
		<cfFraction>$organisationPers.fraction</cfFraction>
#end
	</cfPers_OrgUnit>
	
#end
#foreach( $personResProd in $person.persons_resultProducts )
	<cfPers_ResProd>
		<cfResProdId>$personResProd.resultProduct.id</cfResProdId>		
		<cfClassId>$personResProd.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$personResProd.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$personResProd.startDate)T$date.format('HH:mm:ss',$personResProd.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$personResProd.endDate)T$date.format('HH:mm:ss',$personResProd.endDate)</cfEndDate>
#if ($personResProd.fraction)
		<cfFraction>$personResProd.fraction</cfFraction>
#end
#if ($personResProd.conditions)
		<cfConditions>$personResProd.conditions</cfConditions>
#end
#if ($personResProd.availability)
		<cfAvailability>$personResProd.availability</cfAvailability>
#end
#if ($personResProd.price)
#if (!$personResProd.currency.code)
#set ($currency = "default")
#else
#set ($currency = $personResProd.currency.code)
#end
		<cfPrice cfCurrCode=$esc.quote$currency$esc.quote>$personResProd.price</cfPrice>
#end
#if ($personResProd.ipr)
		<cfIPR>$personResProd.ipr</cfIPR>
#end
	</cfPers_ResProd>
	
#end
#foreach( $persRespubl in $person.persons_resultPublications )
	<cfPers_ResPubl>
		<cfResPublId>$persRespubl.resultPublication.id</cfResPublId>		
		<cfClassId>$persRespubl.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$persRespubl.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$persRespubl.startDate)T$date.format('HH:mm:ss',$persRespubl.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$persRespubl.endDate)T$date.format('HH:mm:ss',$persRespubl.endDate)</cfEndDate>
#if ($persRespubl.fraction)
		<cfFraction>$persRespubl.fraction</cfFraction>
#end
	</cfPers_ResPubl>
	
#end
#foreach( $projectPers in $person.projects )
	<cfProj_Pers>
		<cfProjId>$projectPers.project.id</cfProjId>		
		<cfClassId>$projectPers.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$projectPers.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$projectPers.startDate)T$date.format('HH:mm:ss',$projectPers.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$projectPers.endDate)T$date.format('HH:mm:ss',$projectPers.endDate)</cfEndDate>
#if ($projectPers.fraction)
		<cfFraction>$projectPers.fraction</cfFraction>
#end
	</cfProj_Pers>
	
#end
#foreach( $personName in $person.personNames )
	<cfPersName_Pers>
		<cfPersNameId>$personName.id</cfPersNameId>	
		<cfClassId>64f0eb00-462d-4737-8033-7efac82decf3</cfClassId>
		<cfClassSchemeId>7375609d-cfa6-45ce-a803-75de69abe21f</cfClassSchemeId>	
#if ($personName.familyNames && $personName.familyNames != "")
		<cfFamilyNames>$cerif.xml($personName.familyNames)</cfFamilyNames>
#end
#if ($personName.firstNames && $personName.firstNames != "")			
		<cfFirstNames>$cerif.xml($personName.firstNames)</cfFirstNames>
#end
	</cfPersName_Pers>
	
#end	
#foreach( $personFederatedIdentifiers in $person.federatedIdentifiers )
	<cfFedId>
		<cfFedIdId>$personFederatedIdentifiers.id</cfFedIdId>
#if ($personFederatedIdentifiers.fedId && $personFederatedIdentifiers.fedId != "")
		<cfFedId>$cerif.xml($personFederatedIdentifiers.fedId)</cfFedId>
#end
#if ($personFederatedIdentifiers.theClass)
		<cfClassId>$personFederatedIdentifiers.theClass.uuid</cfClassId>
#end
#if ($personFederatedIdentifiers.scheme)
		<cfClassSchemeId>$personFederatedIdentifiers.scheme.uuid</cfClassSchemeId>
#end
#if ($personFederatedIdentifiers.startDate)
		<cfStartDate>$date.format('yyyy-MM-dd',$personFederatedIdentifiers.startDate)T$date.format('HH:mm:ss',$personFederatedIdentifiers.startDate)</cfStartDate>
#end
#if ($personFederatedIdentifiers.endDate)
		<cfEndDate>$date.format('yyyy-MM-dd',$personFederatedIdentifiers.endDate)T$date.format('HH:mm:ss',$personFederatedIdentifiers.endDate)</cfEndDate>
#end
	
#foreach( $federatedIdentifierClass in $personFederatedIdentifiers.fedIds_classes )
		<cfFedId_Class>
			<cfClassId>$federatedIdentifierClass.theClass.uuid</cfClassId>	
			<cfClassSchemeId>$federatedIdentifierClass.theClass.scheme.uuid</cfClassSchemeId>
			<cfStartDate>$date.format('yyyy-MM-dd',$federatedIdentifierClass.startDate)T$date.format('HH:mm:ss',$federatedIdentifierClass.startDate)</cfStartDate>
			<cfEndDate>$date.format('yyyy-MM-dd',$federatedIdentifierClass.endDate)T$date.format('HH:mm:ss',$federatedIdentifierClass.endDate)</cfEndDate>
#if ($federatedIdentifierClass.fraction)
			<cfFraction>$federatedIdentifierClass.fraction</cfFraction>
#end
		</cfFedId_Class>
		
#end
#foreach( $federatedIdentifierService in $personFederatedIdentifiers.services_fedIds )
		<cfFedId_Srv>
		 	<cfSrvId>$federatedIdentifierService.service.id</cfSrvId>
			<cfClassId>$federatedIdentifierService.theClass.uuid</cfClassId>	
			<cfClassSchemeId>$federatedIdentifierService.theClass.scheme.uuid</cfClassSchemeId>
			<cfStartDate>$date.format('yyyy-MM-dd',$federatedIdentifierService.startDate)T$date.format('HH:mm:ss',$federatedIdentifierService.startDate)</cfStartDate>
			<cfEndDate>$date.format('yyyy-MM-dd',$federatedIdentifierService.endDate)T$date.format('HH:mm:ss',$federatedIdentifierService.endDate)</cfEndDate>
#if ($federatedIdentifierService.fraction)
			<cfFraction>$federatedIdentifierService.fraction</cfFraction>
#end
		</cfFedId_Srv>
		
#end
	</cfFedId>
	
#end
</cfPers>

#end

#foreach( $electronicAddress in $electronicAddresses )
<!-- An electronic address record -->
<cfEAddr>
	<cfEAddrId>$electronicAddress.id</cfEAddrId>
#if ($electronicAddress.uri && $electronicAddress.uri != "")
	<cfURI>$cerif.xml($electronicAddress.uri)</cfURI>
#end

#foreach( $personEAddress in $electronicAddress.persons_electronicAddresses )
	<cfPers_EAddr>
		<cfPersId>$personEAddress.person.id</cfPersId>		
		<cfClassId>$personEAddress.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$personEAddress.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$personEAddress.startDate)T$date.format('HH:mm:ss',$personEAddress.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$personEAddress.endDate)T$date.format('HH:mm:ss',$personEAddress.endDate)</cfEndDate>
#if ($personEAddress.fraction)
		<cfFraction>$personEAddress.fraction</cfFraction>
#end
	</cfPers_EAddr>
	
#end

</cfEAddr>

#end

#foreach( $funding in $fundings )
<!-- A funding record -->
<cfFund>
	<cfFundId>$funding.id</cfFundId>
#foreach( $fundingName in $funding.fundingNames )
#if( $fundingName.translation == "HUMAN" )
#set ($trans = "h")
#elseif( $fundingName.translation == "ORIGINAL" )
#set ($trans = "o")
#else
#set ($trans = "m")
#end
	<cfName cfLangCode=$esc.quote$fundingName.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($fundingName.name)</cfName>
#end
#foreach( $fundingDescr in $funding.fundingDescriptions )
#if( $fundingDescr.translation == "HUMAN" )
#set ($trans = "h")
#elseif( $fundingDescr.translation == "ORIGINAL" )
#set ($trans = "o")
#else
#set ($trans = "m")
#end
	<cfDescr cfLangCode=$esc.quote$fundingDescr.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($fundingDescr.description)</cfDescr>
#end
#foreach( $fundingKeyword in $funding.fundingKeywords )
#if( $fundingKeyword.translation == "HUMAN" )
#set ($trans = "h")
#elseif( $fundingKeyword.translation == "ORIGINAL" )
#set ($trans = "o")
#else
#set ($trans = "m")
#end
	<cfKeyw cfLangCode=$esc.quote$fundingKeyword.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($fundingKeyword.keyword)</cfKeyw>
#end

#foreach( $fundingFunding1 in $funding.fundings_fundings1 )
	<cfFund_Fund>
		<cfFundId1>$fundingFunding1.funding1.id</cfFundId1>	
		<cfClassId>$fundingFunding1.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$fundingFunding1.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$fundingFunding1.startDate)T$date.format('HH:mm:ss',$fundingFunding1.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$fundingFunding1.endDate)T$date.format('HH:mm:ss',$fundingFunding1.endDate)</cfEndDate>
#if ($fundingFunding1.fraction)
		<cfFraction>$fundingFunding1.fraction</cfFraction>
#end
	</cfFund_Fund>
	
#end
#foreach( $fundingFunding2 in $funding.fundings_fundings2 )
	<cfFund_Fund>
		<cfFundId2>$fundingFunding2.funding2.id</cfFundId2>	
		<cfClassId>$fundingFunding2.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$fundingFunding2.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$fundingFunding2.startDate)T$date.format('HH:mm:ss',$fundingFunding2.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$fundingFunding2.endDate)T$date.format('HH:mm:ss',$fundingFunding2.endDate)</cfEndDate>
#if ($fundingFunding2.fraction)
		<cfFraction>$fundingFunding2.fraction</cfFraction>
#end
	</cfFund_Fund>
	
#end
#foreach( $fundClass in $funding.fundings_classes )
	<cfFund_Class>
		<cfClassId>$fundClass.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$fundClass.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$fundClass.startDate)T$date.format('HH:mm:ss',$fundClass.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$fundClass.endDate)T$date.format('HH:mm:ss',$fundClass.endDate)</cfEndDate>
#if ($fundClass.fraction)
		<cfFraction>$fundClass.fraction</cfFraction>
#end
	</cfFund_Class>
	
#end
#foreach( $organisationFund in $funding.organisationUnits_fundings )
	<cfOrgUnit_Fund>
		<cfOrgUnitId>$organisationFund.organisationUnit.id</cfOrgUnitId>		
		<cfClassId>$organisationFund.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$organisationFund.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$organisationFund.startDate)T$date.format('HH:mm:ss',$organisationFund.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$organisationFund.endDate)T$date.format('HH:mm:ss',$organisationFund.endDate)</cfEndDate>
#if ($organisationFund.fraction)
		<cfFraction>$organisationFund.fraction</cfFraction>
#end
#if ($organisationFund.amount)
#if (!$organisationFund.currency.code)
#set ($currency = "default")
#else
#set ($currency = $organisationFund.currency.code)
#end
		<cfAmount cfCurrCode=$esc.quote$currency$esc.quote>$organisationFund.amount</cfAmount>
#end
	</cfOrgUnit_Fund>
	
#end
#foreach( $projectFund in $funding.projects_fundings )
	<cfProj_Fund>
		<cfProjId>$projectFund.project.id</cfProjId>		
		<cfClassId>$projectFund.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$projectFund.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$projectFund.startDate)T$date.format('HH:mm:ss',$projectFund.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$projectFund.endDate)T$date.format('HH:mm:ss',$projectFund.endDate)</cfEndDate>
#if ($projectFund.fraction)
		<cfFraction>$projectFund.fraction</cfFraction>
#end
#if ($projectFund.amount)
#if (!$projectFund.currency.code)
#set ($currency = "default")
#else
#set ($currency = $projectFund.currency.code)
#end
		<cfAmount cfCurrCode=$esc.quote$currency$esc.quote>$projectFund.amount</cfAmount>
#end
	</cfProj_Fund>
	
#end
#foreach( $fundingFederatedIdentifiers in $funding.federatedIdentifiers )
	<cfFedId>
		<cfFedIdId>$fundingFederatedIdentifiers.id</cfFedIdId>
#if ($fundingFederatedIdentifiers.fedId && $fundingFederatedIdentifiers.fedId != "")
		<cfFedId>$cerif.xml($fundingFederatedIdentifiers.fedId)</cfFedId>
#end
#if ($fundingFederatedIdentifiers.theClass)
		<cfClassId>$fundingFederatedIdentifiers.theClass.uuid</cfClassId>
#end
#if ($fundingFederatedIdentifiers.scheme)
		<cfClassSchemeId>$fundingFederatedIdentifiers.scheme.uuid</cfClassSchemeId>
#end
#if ($fundingFederatedIdentifiers.startDate)
		<cfStartDate>$date.format('yyyy-MM-dd',$fundingFederatedIdentifiers.startDate)T$date.format('HH:mm:ss',$fundingFederatedIdentifiers.startDate)</cfStartDate>
#end
#if ($fundingFederatedIdentifiers.endDate)
		<cfEndDate>$date.format('yyyy-MM-dd',$fundingFederatedIdentifiers.endDate)T$date.format('HH:mm:ss',$fundingFederatedIdentifiers.endDate)</cfEndDate>
#end
	
#foreach( $federatedIdentifierClass in $fundingFederatedIdentifiers.fedIds_classes )
		<cfFedId_Class>
			<cfClassId>$federatedIdentifierClass.theClass.uuid</cfClassId>	
			<cfClassSchemeId>$federatedIdentifierClass.theClass.scheme.uuid</cfClassSchemeId>
			<cfStartDate>$date.format('yyyy-MM-dd',$federatedIdentifierClass.startDate)T$date.format('HH:mm:ss',$federatedIdentifierClass.startDate)</cfStartDate>
			<cfEndDate>$date.format('yyyy-MM-dd',$federatedIdentifierClass.endDate)T$date.format('HH:mm:ss',$federatedIdentifierClass.endDate)</cfEndDate>
#if ($federatedIdentifierClass.fraction)
			<cfFraction>$federatedIdentifierClass.fraction</cfFraction>
#end
		</cfFedId_Class>
		
#end
#foreach( $federatedIdentifierService in $fundingFederatedIdentifiers.services_fedIds )
		<cfFedId_Srv>
		 	<cfSrvId>$federatedIdentifierService.service.id</cfSrvId>
			<cfClassId>$federatedIdentifierService.theClass.uuid</cfClassId>	
			<cfClassSchemeId>$federatedIdentifierService.theClass.scheme.uuid</cfClassSchemeId>
			<cfStartDate>$date.format('yyyy-MM-dd',$federatedIdentifierService.startDate)T$date.format('HH:mm:ss',$federatedIdentifierService.startDate)</cfStartDate>
			<cfEndDate>$date.format('yyyy-MM-dd',$federatedIdentifierService.endDate)T$date.format('HH:mm:ss',$federatedIdentifierService.endDate)</cfEndDate>
#if ($federatedIdentifierService.fraction)
			<cfFraction>$federatedIdentifierService.fraction</cfFraction>
#end
		</cfFedId_Srv>
		
#end
	</cfFedId>
	
#end
</cfFund>

#end

#foreach( $theClass in $classes )
<!-- A class record -->
<cfClass>
	<cfClassId>$theClass.uuid</cfClassId>
	<cfClassSchemeId>$theClass.scheme.uuid</cfClassSchemeId>
#if ($theClass.startDate && $theClass.startDate != "")
	<cfStartDate>$date.format('yyyy-MM-dd',$theClass.startDate)</cfStartDate>
#end
#if ($theClass.endDate && $theClass.endDate != "")
	<cfEndDate>$date.format('yyyy-MM-dd',$theClass.endDate)</cfEndDate>
#end
#if ($theClass.uri && $theClass.uri != "")
	<cfURI>$cerif.xml($theClass.uri)</cfURI>
#end
#foreach( $classDescription in $theClass.descriptions )
#if( $classDescription.translation == "HUMAN" )
#set ($trans = "h")
#elseif( $classDescription.translation == "ORIGINAL" )
#set ($trans = "o")
#else
#set ($trans = "m")
#end
	<cfDescr cfLangCode=$esc.quote$classDescription.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($classDescription.description)</cfDescr>
#if ($classDescription.descriptionSrc && $classDescription.descriptionSrc != "")	
	<cfDescrSrc cfLangCode=$esc.quote$classDescription.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($classDescription.descriptionSrc)</cfDescrSrc>
#end
#end
#foreach( $classTerm in $theClass.terms )
#if( $classTerm.translation == "HUMAN" )
#set ($trans = "h")
#elseif( $classTerm.translation == "ORIGINAL" )
#set ($trans = "o")
#else
#set ($trans = "m")
#end
	<cfTerm cfLangCode=$esc.quote$classTerm.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($classTerm.term)</cfTerm>
#if ($classTerm.roleExpr && $classTerm.roleExpr != "")	
	<cfRoleExpr cfLangCode=$esc.quote$classTerm.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($classTerm.roleExpr)</cfRoleExpr>
#end
#if ($classTerm.roleExprOpp && $classTerm.roleExprOpp != "")	
	<cfRoleExprOpp cfLangCode=$esc.quote$classTerm.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($classTerm.roleExprOpp)</cfRoleExprOpp>
#end
#if ($classTerm.termSrc && $classTerm.termSrc != "")	
	<cfTermSrc cfLangCode=$esc.quote$classTerm.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($classTerm.termSrc)</cfTermSrc>
#end
#end
#foreach( $classDefinition in $theClass.definitions )
#if( $classDefinition.translation == "HUMAN" )
#set ($trans = "h")
#elseif( $classDefinition.translation == "ORIGINAL" )
#set ($trans = "o")
#else
#set ($trans = "m")
#end
	<cfDef cfLangCode=$esc.quote$classDefinition.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($classDefinition.definition)</cfDef>
#if ($classDefinition.definitionSrc && $classDefinition.definitionSrc != "")	
	<cfDefSrc cfLangCode=$esc.quote$classDefinition.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($classDefinition.definitionSrc)</cfDefSrc>
#end
#end
#foreach( $classEx in $theClass.exs )
#if( $classEx.translation == "HUMAN" )
#set ($trans = "h")
#elseif( $classEx.translation == "ORIGINAL" )
#set ($trans = "o")
#else
#set ($trans = "m")
#end
	<cfEx cfLangCode=$esc.quote$classEx.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($classEx.ex)</cfEx>
#if ($classEx.exSrc && $classEx.exSrc != "")	
	<cfExSrc cfLangCode=$esc.quote$classEx.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($classEx.exSrc)</cfExSrc>
#end
#end

#foreach( $classClass1 in $theClass.class_class1 )
	<cfClass_Class>
		<cfClassId1>$classClass1.theClass1.uuid</cfClassId1>	
		<cfClassSchemeId1>$classClass1.theClass1.scheme.uuid</cfClassSchemeId1>	
		<cfClassId>$classClass1.theClass.uuid</cfClassId>		
		<cfClassSchemeId>$classClass1.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$classClass1.startDate)T$date.format('HH:mm:ss',$classClass1.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$classClass1.endDate)T$date.format('HH:mm:ss',$classClass1.endDate)</cfEndDate>
#if ($classClass1.fraction)
		<cfFraction>$classClass1.fraction</cfFraction>
#end
	</cfClass_Class>
	
#end
#foreach( $classClass2 in $theClass.class_class2 )
	<cfClass_Class>
		<cfClassId2>$classClass2.theClass2.uuid</cfClassId2>	
		<cfClassSchemeId2>$classClass2.theClass2.scheme.uuid</cfClassSchemeId2>	
		<cfClassId>$classClass2.theClass.uuid</cfClassId>		
		<cfClassSchemeId>$classClass2.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$classClass2.startDate)T$date.format('HH:mm:ss',$classClass2.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$classClass2.endDate)T$date.format('HH:mm:ss',$classClass2.endDate)</cfEndDate>
#if ($classClass2.fraction)
		<cfFraction>$classClass2.fraction</cfFraction>
#end
	</cfClass_Class>
	
#end
#foreach( $classFederatedIdentifiers in $theClass.transientFederatedIdentifiers )
	<cfFedId>
		<cfFedIdId>$classFederatedIdentifiers.id</cfFedIdId>
#if ($classFederatedIdentifiers.fedId && $classFederatedIdentifiers.fedId != "")
		<cfFedId>$cerif.xml($classFederatedIdentifiers.fedId)</cfFedId>
#end
#if ($classFederatedIdentifiers.theClass)
		<cfClassId>$classFederatedIdentifiers.theClass.uuid</cfClassId>
#end
#if ($classFederatedIdentifiers.scheme)
		<cfClassSchemeId>$classFederatedIdentifiers.scheme.uuid</cfClassSchemeId>
#end
#if ($classFederatedIdentifiers.startDate)
		<cfStartDate>$date.format('yyyy-MM-dd',$classFederatedIdentifiers.startDate)T$date.format('HH:mm:ss',$classFederatedIdentifiers.startDate)</cfStartDate>
#end
#if ($classFederatedIdentifiers.endDate)
		<cfEndDate>$date.format('yyyy-MM-dd',$classFederatedIdentifiers.endDate)T$date.format('HH:mm:ss',$classFederatedIdentifiers.endDate)</cfEndDate>
#end
	
#foreach( $federatedIdentifierClass in $classFederatedIdentifiers.fedIds_classes )
		<cfFedId_Class>
			<cfClassId>$federatedIdentifierClass.theClass.uuid</cfClassId>	
			<cfClassSchemeId>$federatedIdentifierClass.theClass.scheme.uuid</cfClassSchemeId>
			<cfStartDate>$date.format('yyyy-MM-dd',$federatedIdentifierClass.startDate)T$date.format('HH:mm:ss',$federatedIdentifierClass.startDate)</cfStartDate>
			<cfEndDate>$date.format('yyyy-MM-dd',$federatedIdentifierClass.endDate)T$date.format('HH:mm:ss',$federatedIdentifierClass.endDate)</cfEndDate>
#if ($federatedIdentifierClass.fraction)
			<cfFraction>$federatedIdentifierClass.fraction</cfFraction>
#end
		</cfFedId_Class>
		
#end
#foreach( $federatedIdentifierService in $classFederatedIdentifiers.services_fedIds )
		<cfFedId_Srv>
		 	<cfSrvId>$federatedIdentifierService.service.id</cfSrvId>
			<cfClassId>$federatedIdentifierService.theClass.uuid</cfClassId>	
			<cfClassSchemeId>$federatedIdentifierService.theClass.scheme.uuid</cfClassSchemeId>
			<cfStartDate>$date.format('yyyy-MM-dd',$federatedIdentifierService.startDate)T$date.format('HH:mm:ss',$federatedIdentifierService.startDate)</cfStartDate>
			<cfEndDate>$date.format('yyyy-MM-dd',$federatedIdentifierService.endDate)T$date.format('HH:mm:ss',$federatedIdentifierService.endDate)</cfEndDate>
#if ($federatedIdentifierService.fraction)
			<cfFraction>$federatedIdentifierService.fraction</cfFraction>
#end
		</cfFedId_Srv>
		
#end
	</cfFedId>
	
#end
</cfClass>

#end

#foreach( $classScheme in $classesSchemes )
<!-- A class scheme record -->
<cfClassScheme>
	<cfClassSchemeId>$classScheme.uuid</cfClassSchemeId>
#if ($classScheme.uri && $classScheme.uri != "")
	<cfURI>$cerif.xml($classScheme.uri)</cfURI>
#end
#foreach( $classSchemeDescr in $classScheme.descriptions )
#if( $classSchemeDescr.translation == "HUMAN" )
#set ($trans = "h")
#elseif( $classSchemeDescr.translation == "ORIGINAL" )
#set ($trans = "o")
#else
#set ($trans = "m")
#end
	<cfDescr cfLangCode=$esc.quote$classSchemeDescr.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($classSchemeDescr.description)</cfDescr>
#if ($classSchemeDescr.descriptionSrc && $classSchemeDescr.descriptionSrc != "")
	<cfDescrSrc cfLangCode=$esc.quote$classSchemeDescr.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($classSchemeDescr.descriptionSrc)</cfDescrSrc>
#end
#end
#foreach( $classSchemeName in $classScheme.names )
#if( $classSchemeName.translation == "HUMAN" )
#set ($trans = "h")
#elseif( $classSchemeName.translation == "ORIGINAL" )
#set ($trans = "o")
#else
#set ($trans = "m")
#end
	<cfName cfLangCode=$esc.quote$classSchemeName.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($classSchemeName.name)</cfName>
#if ($classSchemeName.nameSrc && $classSchemeName.nameSrc != "")
	<cfNameSrc cfLangCode=$esc.quote$classSchemeName.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($classSchemeName.nameSrc)</cfNameSrc>
#end
#end

#foreach( $classSchemeFederatedIdentifiers in $classScheme.transientFederatedIdentifiers )
	<cfFedId>
		<cfFedIdId>$classSchemeFederatedIdentifiers.id</cfFedIdId>
#if ($classSchemeFederatedIdentifiers.fedId && $classSchemeFederatedIdentifiers.fedId != "")
		<cfFedId>$cerif.xml($classSchemeFederatedIdentifiers.fedId)</cfFedId>
#end
#if ($classSchemeFederatedIdentifiers.theClass)
		<cfClassId>$classSchemeFederatedIdentifiers.theClass.uuid</cfClassId>
#end
#if ($classSchemeFederatedIdentifiers.scheme)
		<cfClassSchemeId>$classSchemeFederatedIdentifiers.scheme.uuid</cfClassSchemeId>
#end
#if ($classSchemeFederatedIdentifiers.startDate)
		<cfStartDate>$date.format('yyyy-MM-dd',$classSchemeFederatedIdentifiers.startDate)T$date.format('HH:mm:ss',$classSchemeFederatedIdentifiers.startDate)</cfStartDate>
#end
#if ($classSchemeFederatedIdentifiers.endDate)
		<cfEndDate>$date.format('yyyy-MM-dd',$classSchemeFederatedIdentifiers.endDate)T$date.format('HH:mm:ss',$classSchemeFederatedIdentifiers.endDate)</cfEndDate>
#end
	
#foreach( $federatedIdentifierClass in $classSchemeFederatedIdentifiers.fedIds_classes )
		<cfFedId_Class>
			<cfClassId>$federatedIdentifierClass.theClass.uuid</cfClassId>	
			<cfClassSchemeId>$federatedIdentifierClass.theClass.scheme.uuid</cfClassSchemeId>
			<cfStartDate>$date.format('yyyy-MM-dd',$federatedIdentifierClass.startDate)T$date.format('HH:mm:ss',$federatedIdentifierClass.startDate)</cfStartDate>
			<cfEndDate>$date.format('yyyy-MM-dd',$federatedIdentifierClass.endDate)T$date.format('HH:mm:ss',$federatedIdentifierClass.endDate)</cfEndDate>
#if ($federatedIdentifierClass.fraction)
			<cfFraction>$federatedIdentifierClass.fraction</cfFraction>
#end
		</cfFedId_Class>
		
#end
#foreach( $federatedIdentifierService in $classSchemeFederatedIdentifiers.services_fedIds )
		<cfFedId_Srv>
		 	<cfSrvId>$federatedIdentifierService.service.id</cfSrvId>
			<cfClassId>$federatedIdentifierService.theClass.uuid</cfClassId>	
			<cfClassSchemeId>$federatedIdentifierService.theClass.scheme.uuid</cfClassSchemeId>
			<cfStartDate>$date.format('yyyy-MM-dd',$federatedIdentifierService.startDate)T$date.format('HH:mm:ss',$federatedIdentifierService.startDate)</cfStartDate>
			<cfEndDate>$date.format('yyyy-MM-dd',$federatedIdentifierService.endDate)T$date.format('HH:mm:ss',$federatedIdentifierService.endDate)</cfEndDate>
#if ($federatedIdentifierService.fraction)
			<cfFraction>$federatedIdentifierService.fraction</cfFraction>
#end
		</cfFedId_Srv>
		
#end
	</cfFedId>
	
#end
## Embedded classes of scheme
#foreach($theClass in $classScheme.classes)
<cfClass>
	<cfClassId>$theClass.uuid</cfClassId>
#if ($theClass.startDate && $theClass.startDate != "")
	<cfStartDate>$date.format('yyyy-MM-dd',$theClass.startDate)</cfStartDate>
#end
#if ($theClass.endDate && $theClass.endDate != "")
	<cfEndDate>$date.format('yyyy-MM-dd',$theClass.endDate)</cfEndDate>
#end
#if ($theClass.uri && $theClass.uri != "")
	<cfURI>$cerif.xml($theClass.uri)</cfURI>
#end
#if ($theClass.uuid && $theClass.uuid != "")
	<cfUUID>$theClass.uuid</cfUUID>
#end
#foreach( $classDescription in $theClass.descriptions )
#if( $classDescription.translation == "HUMAN" )
#set ($trans = "h")
#elseif( $classDescription.translation == "ORIGINAL" )
#set ($trans = "o")
#else
#set ($trans = "m")
#end
	<cfDescr cfLangCode=$esc.quote$classDescription.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($classDescription.description)</cfDescr>
#if ($classDescription.descriptionSrc && $classDescription.descriptionSrc != "")	
	<cfDescrSrc cfLangCode=$esc.quote$classDescription.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($classDescription.descriptionSrc)</cfDescrSrc>
#end
#end
#foreach( $classTerm in $theClass.terms )
#if( $classTerm.translation == "HUMAN" )
#set ($trans = "h")
#elseif( $classTerm.translation == "ORIGINAL" )
#set ($trans = "o")
#else
#set ($trans = "m")
#end
	<cfTerm cfLangCode=$esc.quote$classTerm.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($classTerm.term)</cfTerm>
#if ($classTerm.roleExpr && $classTerm.roleExpr != "")	
	<cfRoleExpr cfLangCode=$esc.quote$classTerm.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($classTerm.roleExpr)</cfRoleExpr>
#end
#if ($classTerm.roleExprOpp && $classTerm.roleExprOpp != "")	
	<cfRoleExprOpp cfLangCode=$esc.quote$classTerm.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($classTerm.roleExprOpp)</cfRoleExprOpp>
#end
#if ($classTerm.termSrc && $classTerm.termSrc != "")	
	<cfTermSrc cfLangCode=$esc.quote$classTerm.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($classTerm.termSrc)</cfTermSrc>
#end
#end
#foreach( $classDefinition in $theClass.definitions )
#if( $classDefinition.translation == "HUMAN" )
#set ($trans = "h")
#elseif( $classDefinition.translation == "ORIGINAL" )
#set ($trans = "o")
#else
#set ($trans = "m")
#end
	<cfDef cfLangCode=$esc.quote$classDefinition.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($classDefinition.definition)</cfDef>
#if ($classDefinition.definitionSrc && $classDefinition.definitionSrc != "")	
	<cfDefSrc cfLangCode=$esc.quote$classDefinition.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($classDefinition.definitionSrc)</cfDefSrc>
#end
#end
#foreach( $classEx in $theClass.exs )
#if( $classEx.translation == "HUMAN" )
#set ($trans = "h")
#elseif( $classEx.translation == "ORIGINAL" )
#set ($trans = "o")
#else
#set ($trans = "m")
#end
	<cfEx cfLangCode=$esc.quote$classEx.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($classEx.ex)</cfEx>
#if ($classEx.exSrc && $classEx.exSrc != "")	
	<cfExSrc cfLangCode=$esc.quote$classEx.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($classEx.exSrc)</cfExSrc>
#end
#end
</cfClass>
#end
</cfClassScheme>

#end

#foreach( $resultProduct in $resultProducts )
<!-- A Result Product record -->
<cfResProd>
	<cfResProdId>$resultProduct.id</cfResProdId>
#foreach( $resultProductName in $resultProduct.resultProductNames )
#if( $resultProductName.translation == "HUMAN" )
#set ($trans = "h")
#elseif( $resultProductName.translation == "ORIGINAL" )
#set ($trans = "o")
#else
#set ($trans = "m")
#end
	<cfName cfLangCode=$esc.quote$resultProductName.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($resultProductName.name)</cfName>
#end
#foreach( $resultProductDescr in $resultProduct.resultProductDescriptions )
#if( $resultProductDescr.translation == "HUMAN" )
#set ($trans = "h")
#elseif( $resultProductDescr.translation == "ORIGINAL" )
#set ($trans = "o")
#else
#set ($trans = "m")
#end
	<cfDescr cfLangCode=$esc.quote$resultProductDescr.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($resultProductDescr.description)</cfDescr>
#end

#foreach( $organisationResProd in $resultProduct.organisationUnits_resultProducts )
	<cfOrgUnit_ResProd>
		<cfOrgUnitId>$organisationResProd.organisationUnit.id</cfOrgUnitId>		
		<cfClassId>$organisationResProd.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$organisationResProd.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$organisationResProd.startDate)T$date.format('HH:mm:ss',$organisationResProd.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$organisationResProd.endDate)T$date.format('HH:mm:ss',$organisationResProd.endDate)</cfEndDate>
#if ($organisationResProd.fraction)
		<cfFraction>$organisationResProd.fraction</cfFraction>
#end
#if ($organisationResProd.availability)
		<cfAvailability>$organisationResProd.availability</cfAvailability>
#end
#if ($organisationResProd.conditions)
		<cfConditions>$organisationResProd.conditions</cfConditions>
#end
#if ($organisationResProd.price)
#if (!$organisationResProd.currency.code)
#set ($currency = "default")
#else
#set ($currency = $organisationResProd.currency.code)
#end
		<cfPrice cfCurrCode=$esc.quote$currency$esc.quote>$organisationResProd.price</cfPrice>
#end
	</cfOrgUnit_ResProd>
	
#end
#foreach( $personResProd in $resultProduct.persons_resultProducts )
	<cfPers_ResProd>
		<cfPersId>$personResProd.person.id</cfPersId>		
		<cfClassId>$personResProd.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$personResProd.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$personResProd.startDate)T$date.format('HH:mm:ss',$personResProd.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$personResProd.endDate)T$date.format('HH:mm:ss',$personResProd.endDate)</cfEndDate>
#if ($personResProd.fraction)
		<cfFraction>$personResProd.fraction</cfFraction>
#end
#if ($personResProd.conditions)
		<cfConditions>$personResProd.conditions</cfConditions>
#end
#if ($personResProd.availability)
		<cfAvailability>$personResProd.availability</cfAvailability>
#end
#if ($personResProd.price)
#if (!$personResProd.currency.code)
#set ($currency = "default")
#else
#set ($currency = $personResProd.currency.code)
#end
		<cfPrice cfCurrCode=$esc.quote$currency$esc.quote>$personResProd.price</cfPrice>
#end
#if ($personResProd.ipr)
		<cfIPR>$personResProd.ipr</cfIPR>
#end
	</cfPers_ResProd>
	
#end
#foreach( $projectResProd in $resultProduct.projects_resultProducts )
	<cfProj_ResProd>
		<cfProjId>$projectResProd.project.id</cfProjId>		
		<cfClassId>$projectResProd.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$projectResProd.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$projectResProd.startDate)T$date.format('HH:mm:ss',$projectResProd.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$projectResProd.endDate)T$date.format('HH:mm:ss',$projectResProd.endDate)</cfEndDate>
#if ($projectResProd.fraction)
		<cfFraction>$projectResProd.fraction</cfFraction>
#end
	</cfProj_ResProd>
	
#end
#foreach( $resultProductClass in $resultProduct.resultProducts_classes )
	<cfResProd_Class>
		<cfClassId>$resultProductClass.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$resultProductClass.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$resultProductClass.startDate)T$date.format('HH:mm:ss',$resultProductClass.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$resultProductClass.endDate)T$date.format('HH:mm:ss',$resultProductClass.endDate)</cfEndDate>
#if ($resultProductClass.fraction)
		<cfFraction>$resultProductClass.fraction</cfFraction>
#end
	</cfResProd_Class>
	
#end
#foreach( $resultPublicationResProd in $resultProduct.resultPublications_resultProducts )
	<cfResPubl_ResProd>
		<cfResPublId>$resultPublicationResProd.resultPublication.id</cfResPublId>		
		<cfClassId>$resultPublicationResProd.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$resultPublicationResProd.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$resultPublicationResProd.startDate)T$date.format('HH:mm:ss',$resultPublicationResProd.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$resultPublicationResProd.endDate)T$date.format('HH:mm:ss',$resultPublicationResProd.endDate)</cfEndDate>
#if ($resultPublicationResProd.fraction)
		<cfFraction>$resultPublicationResProd.fraction</cfFraction>
#end
	</cfResPubl_ResProd>
	
#end
#foreach( $resprodResprod1 in $resultProduct.resultProducts_resultProducts1 )
	<cfResProd_ResProd>
		<cfResProdId1>$resprodResprod1.resultProduct1.id</cfResProdId1>	
		<cfClassId>$resprodResprod1.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$resprodResprod1.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$resprodResprod1.startDate)T$date.format('HH:mm:ss',$resprodResprod1.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$resprodResprod1.endDate)T$date.format('HH:mm:ss',$resprodResprod1.endDate)</cfEndDate>
#if ($resprodResprod1.fraction)
		<cfFraction>$resprodResprod1.fraction</cfFraction>
#end
	</cfResProd_ResProd>
	
#end
#foreach( $resprodResprod2 in $resultProduct.resultProducts_resultProducts2 )
	<cfResProd_ResProd>
		<cfResProdId2>$resprodResprod2.resultProduct2.id</cfResProdId2>	
		<cfClassId>$resprodResprod2.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$resprodResprod2.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$resprodResprod2.startDate)T$date.format('HH:mm:ss',$resprodResprod2.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$resprodResprod2.endDate)T$date.format('HH:mm:ss',$resprodResprod2.endDate)</cfEndDate>
#if ($resprodResprod2.fraction)
		<cfFraction>$resprodResprod2.fraction</cfFraction>
#end
	</cfResProd_ResProd>
	
#end
#foreach( $equipmentResProd in $resultProduct.resultProducts_equipments )
	<cfResProd_Equip>
		<cfEquipId>$equipmentResProd.equipment.id</cfEquipId>		
		<cfClassId>$equipmentResProd.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$equipmentResProd.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$equipmentResProd.startDate)T$date.format('HH:mm:ss',$equipmentResProd.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$equipmentResProd.endDate)T$date.format('HH:mm:ss',$equipmentResProd.endDate)</cfEndDate>
#if ($equipmentResProd.fraction)
		<cfFraction>$equipmentResProd.fraction</cfFraction>
#end
	</cfResProd_Equip>
	
#end
#foreach( $resultProductFederatedIdentifiers in $resultProduct.federatedIdentifiers )
	<cfFedId>
		<cfFedIdId>$resultProductFederatedIdentifiers.id</cfFedIdId>
#if ($resultProductFederatedIdentifiers.fedId && $resultProductFederatedIdentifiers.fedId != "")
		<cfFedId>$cerif.xml($resultProductFederatedIdentifiers.fedId)</cfFedId>
#end
#if ($resultProductFederatedIdentifiers.theClass)
		<cfClassId>$resultProductFederatedIdentifiers.theClass.uuid</cfClassId>
#end
#if ($resultProductFederatedIdentifiers.scheme)
		<cfClassSchemeId>$resultProductFederatedIdentifiers.scheme.uuid</cfClassSchemeId>
#end
#if ($resultProductFederatedIdentifiers.startDate)
		<cfStartDate>$date.format('yyyy-MM-dd',$resultProductFederatedIdentifiers.startDate)T$date.format('HH:mm:ss',$resultProductFederatedIdentifiers.startDate)</cfStartDate>
#end
#if ($resultProductFederatedIdentifiers.endDate)
		<cfEndDate>$date.format('yyyy-MM-dd',$resultProductFederatedIdentifiers.endDate)T$date.format('HH:mm:ss',$resultProductFederatedIdentifiers.endDate)</cfEndDate>
#end
	
#foreach( $federatedIdentifierClass in $resultProductFederatedIdentifiers.fedIds_classes )
		<cfFedId_Class>
			<cfClassId>$federatedIdentifierClass.theClass.uuid</cfClassId>	
			<cfClassSchemeId>$federatedIdentifierClass.theClass.scheme.uuid</cfClassSchemeId>
			<cfStartDate>$date.format('yyyy-MM-dd',$federatedIdentifierClass.startDate)T$date.format('HH:mm:ss',$federatedIdentifierClass.startDate)</cfStartDate>
			<cfEndDate>$date.format('yyyy-MM-dd',$federatedIdentifierClass.endDate)T$date.format('HH:mm:ss',$federatedIdentifierClass.endDate)</cfEndDate>
#if ($federatedIdentifierClass.fraction)
			<cfFraction>$federatedIdentifierClass.fraction</cfFraction>
#end
		</cfFedId_Class>
		
#end
#foreach( $federatedIdentifierService in $resultProductFederatedIdentifiers.services_fedIds )
		<cfFedId_Srv>
		 	<cfSrvId>$federatedIdentifierService.service.id</cfSrvId>
			<cfClassId>$federatedIdentifierService.theClass.uuid</cfClassId>	
			<cfClassSchemeId>$federatedIdentifierService.theClass.scheme.uuid</cfClassSchemeId>
			<cfStartDate>$date.format('yyyy-MM-dd',$federatedIdentifierService.startDate)T$date.format('HH:mm:ss',$federatedIdentifierService.startDate)</cfStartDate>
			<cfEndDate>$date.format('yyyy-MM-dd',$federatedIdentifierService.endDate)T$date.format('HH:mm:ss',$federatedIdentifierService.endDate)</cfEndDate>
#if ($federatedIdentifierService.fraction)
			<cfFraction>$federatedIdentifierService.fraction</cfFraction>
#end
		</cfFedId_Srv>
		
#end
	</cfFedId>
	
#end
</cfResProd>

#end

#foreach( $resultPublication in $resultPublications )
<!-- A Result Publication record -->
<cfResPubl>
	<cfResPublId>$resultPublication.id</cfResPublId>
#if ($resultPublication.date && $resultPublication.date != "")
	<cfResPublDate>$date.format('yyyy-MM-dd',$resultPublication.date)</cfResPublDate>
#end
#foreach( $resultPublicationTitle in $resultPublication.resultPublicationTitles )
#if( $resultPublicationTitle.translation == "HUMAN" )
#set ($trans = "h")
#elseif( $resultPublicationTitle.translation == "ORIGINAL" )
#set ($trans = "o")
#else
#set ($trans = "m")
#end
	<cfTitle cfLangCode=$esc.quote$resultPublicationTitle.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($resultPublicationTitle.title)</cfTitle>
#end
#foreach( $resultPublicationAbstract in $resultPublication.resultPublicationAbstracts )
#if( $resultPublicationAbstract.translation == "HUMAN" )
#set ($trans = "h")
#elseif( $resultPublicationAbstract.translation == "ORIGINAL" )
#set ($trans = "o")
#else
#set ($trans = "m")
#end
	<cfAbstr cfLangCode=$esc.quote$resultPublicationAbstract.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($resultPublicationAbstract.abstractText)</cfAbstr>
#end
#foreach( $resultPublicationKeyword in $resultPublication.resultPublicationKeywords )
#if( $resultPublicationKeyword.translation == "HUMAN" )
#set ($trans = "h")
#elseif( $resultPublicationKeyword.translation == "ORIGINAL" )
#set ($trans = "o")
#else
#set ($trans = "m")
#end
	<cfKeyw cfLangCode=$esc.quote$resultPublicationKeyword.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($resultPublicationKeyword.keyword)</cfKeyw>
#end
#foreach( $resultPublicationSubtitle in $resultPublication.resultPublicationSubtitles )
#if( $resultPublicationSubtitle.translation == "HUMAN" )
#set ($trans = "h")
#elseif( $resultPublicationSubtitle.translation == "ORIGINAL" )
#set ($trans = "o")
#else
#set ($trans = "m")
#end
	<cfSubtitle cfLangCode=$esc.quote$resultPublicationSubtitle.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($resultPublicationSubtitle.subtitle)</cfSubtitle>
#end
	
#foreach( $organisationRespubl in $resultPublication.organisationUnits_resultPublications )
	<cfOrgUnit_ResPubl>
		<cfOrgUnitId>$organisationRespubl.organisationUnit.id</cfOrgUnitId>		
		<cfClassId>$organisationRespubl.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$organisationRespubl.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$organisationRespubl.startDate)T$date.format('HH:mm:ss',$organisationRespubl.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$organisationRespubl.endDate)T$date.format('HH:mm:ss',$organisationRespubl.endDate)</cfEndDate>
#if ($organisationRespubl.fraction)
		<cfFraction>$organisationRespubl.fraction</cfFraction>
#end
	</cfOrgUnit_ResPubl>
	
#end
#foreach( $persRespubl in $resultPublication.persons_resultPublications )
	<cfPers_ResPubl>
		<cfPersId>$persRespubl.person.id</cfPersId>		
		<cfClassId>$persRespubl.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$persRespubl.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$persRespubl.startDate)T$date.format('HH:mm:ss',$persRespubl.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$persRespubl.endDate)T$date.format('HH:mm:ss',$persRespubl.endDate)</cfEndDate>
#if ($persRespubl.fraction)
		<cfFraction>$persRespubl.fraction</cfFraction>
#end
	</cfPers_ResPubl>
	
#end
#foreach( $projectRespubl in $resultPublication.projects_resultPublications )
	<cfProj_ResPubl>
		<cfProjId>$projectRespubl.project.id</cfProjId>		
		<cfClassId>$projectRespubl.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$projectRespubl.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$projectRespubl.startDate)T$date.format('HH:mm:ss',$projectRespubl.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$projectRespubl.endDate)T$date.format('HH:mm:ss',$projectRespubl.endDate)</cfEndDate>
#if ($projectRespubl.fraction)
		<cfFraction>$projectRespubl.fraction</cfFraction>
#end
#if ($projectRespubl.copyright)
		<cfCopyright>$projectRespubl.copyright</cfCopyright>
#end
	</cfProj_ResPubl>
	
#end
#foreach( $respublRespubl1 in $resultPublication.resultPublications_resultPublications1 )
	<cfResPubl_ResPubl>
		<cfResPublId1>$respublRespubl1.resultPublication1.id</cfResPublId1>	
		<cfClassId>$respublRespubl1.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$respublRespubl1.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$respublRespubl1.startDate)T$date.format('HH:mm:ss',$respublRespubl1.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$respublRespubl1.endDate)T$date.format('HH:mm:ss',$respublRespubl1.endDate)</cfEndDate>
#if ($respublRespubl1.fraction)
		<cfFraction>$respublRespubl1.fraction</cfFraction>
#end
	</cfResPubl_ResPubl>
	
#end
#foreach( $respublRespubl2 in $resultPublication.resultPublications_resultPublications2 )
	<cfResPubl_ResPubl>
		<cfResPublId2>$respublRespubl2.resultPublication2.id</cfResPublId2>	
		<cfClassId>$respublRespubl2.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$respublRespubl2.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$respublRespubl2.startDate)T$date.format('HH:mm:ss',$respublRespubl2.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$respublRespubl2.endDate)T$date.format('HH:mm:ss',$respublRespubl2.endDate)</cfEndDate>
#if ($respublRespubl2.fraction)
		<cfFraction>$respublRespubl2.fraction</cfFraction>
#end
	</cfResPubl_ResPubl>
	
#end
#foreach( $respublClass in $resultPublication.resultPublications_classes )
	<cfResPubl_Class>
		<cfClassId>$respublClass.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$respublClass.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$respublClass.startDate)T$date.format('HH:mm:ss',$respublClass.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$respublClass.endDate)T$date.format('HH:mm:ss',$respublClass.endDate)</cfEndDate>
#if ($respublClass.fraction)
		<cfFraction>$respublClass.fraction</cfFraction>
#end
	</cfResPubl_Class>
	
#end
#foreach( $resultPublicationResProd in $resultPublication.resultPublications_resultProducts )
	<cfResPubl_ResProd>
		<cfResProdId>$resultPublicationResProd.resultProduct.id</cfResProdId>		
		<cfClassId>$resultPublicationResProd.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$resultPublicationResProd.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$resultPublicationResProd.startDate)T$date.format('HH:mm:ss',$resultPublicationResProd.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$resultPublicationResProd.endDate)T$date.format('HH:mm:ss',$resultPublicationResProd.endDate)</cfEndDate>
#if ($resultPublicationResProd.fraction)
		<cfFraction>$resultPublicationResProd.fraction</cfFraction>
#end
	</cfResPubl_ResProd>
	
#end
#foreach( $resultPublicationFederatedIdentifiers in $resultPublication.federatedIdentifiers )
	<cfFedId>
		<cfFedIdId>$resultPublicationFederatedIdentifiers.id</cfFedIdId>
#if ($resultPublicationFederatedIdentifiers.fedId && $resultPublicationFederatedIdentifiers.fedId != "")
		<cfFedId>$cerif.xml($resultPublicationFederatedIdentifiers.fedId)</cfFedId>
#end
#if ($resultPublicationFederatedIdentifiers.theClass)
		<cfClassId>$resultPublicationFederatedIdentifiers.theClass.uuid</cfClassId>
#end
#if ($resultPublicationFederatedIdentifiers.scheme)
		<cfClassSchemeId>$resultPublicationFederatedIdentifiers.scheme.uuid</cfClassSchemeId>
#end
#if ($resultPublicationFederatedIdentifiers.startDate)
		<cfStartDate>$date.format('yyyy-MM-dd',$resultPublicationFederatedIdentifiers.startDate)T$date.format('HH:mm:ss',$resultPublicationFederatedIdentifiers.startDate)</cfStartDate>
#end
#if ($classSchemeFederatedIdentifiers.endDate)
		<cfEndDate>$date.format('yyyy-MM-dd',$resultPublicationFederatedIdentifiers.endDate)T$date.format('HH:mm:ss',$resultPublicationFederatedIdentifiers.endDate)</cfEndDate>
#end
	
#foreach( $federatedIdentifierClass in $resultPublicationFederatedIdentifiers.fedIds_classes )
		<cfFedId_Class>
			<cfClassId>$federatedIdentifierClass.theClass.uuid</cfClassId>	
			<cfClassSchemeId>$federatedIdentifierClass.theClass.scheme.uuid</cfClassSchemeId>
			<cfStartDate>$date.format('yyyy-MM-dd',$federatedIdentifierClass.startDate)T$date.format('HH:mm:ss',$federatedIdentifierClass.startDate)</cfStartDate>
			<cfEndDate>$date.format('yyyy-MM-dd',$federatedIdentifierClass.endDate)T$date.format('HH:mm:ss',$federatedIdentifierClass.endDate)</cfEndDate>
#if ($federatedIdentifierClass.fraction)
			<cfFraction>$federatedIdentifierClass.fraction</cfFraction>
#end
		</cfFedId_Class>
		
#end
#foreach( $federatedIdentifierService in $resultPublicationFederatedIdentifiers.services_fedIds )
		<cfFedId_Srv>
		 	<cfSrvId>$federatedIdentifierService.service.id</cfSrvId>
			<cfClassId>$federatedIdentifierService.theClass.uuid</cfClassId>	
			<cfClassSchemeId>$federatedIdentifierService.theClass.scheme.uuid</cfClassSchemeId>
			<cfStartDate>$date.format('yyyy-MM-dd',$federatedIdentifierService.startDate)T$date.format('HH:mm:ss',$federatedIdentifierService.startDate)</cfStartDate>
			<cfEndDate>$date.format('yyyy-MM-dd',$federatedIdentifierService.endDate)T$date.format('HH:mm:ss',$federatedIdentifierService.endDate)</cfEndDate>
#if ($federatedIdentifierService.fraction)
			<cfFraction>$federatedIdentifierService.fraction</cfFraction>
#end
		</cfFedId_Srv>
		
#end
	</cfFedId>
	
#end
</cfResPubl>

#end

#foreach( $service in $services )
<!-- A Service record -->
<cfSrv>
	<cfSrvId>$service.id</cfSrvId>
#foreach( $serviceName in $service.serviceNames )
#if( $serviceName.translation == "HUMAN" )
#set ($trans = "h")
#elseif( $serviceName.translation == "ORIGINAL" )
#set ($trans = "o")
#else
#set ($trans = "m")
#end
	<cfName cfLangCode=$esc.quote$serviceName.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($serviceName.name)</cfName>
#end

#foreach( $serviceOrgs in $service.organisationUnits_services )
	<cfOrgUnit_Srv>
		<cfOrgUnitId>$serviceOrgs.organisationUnit.id</cfOrgUnitId>		
		<cfClassId>$serviceOrgs.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$serviceOrgs.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$serviceOrgs.startDate)T$date.format('HH:mm:ss',$serviceOrgs.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$serviceOrgs.endDate)T$date.format('HH:mm:ss',$serviceOrgs.endDate)</cfEndDate>
#if ($serviceOrgs.fraction)
		<cfFraction>$serviceOrgs.fraction</cfFraction>
#end
#if ($serviceOrgs.availability)
		<cfAvailability>$serviceOrgs.availability</cfAvailability>
#end
#if ($serviceOrgs.conditions)
		<cfConditions>$serviceOrgs.conditions</cfConditions>
#end
#if ($serviceOrgs.price)
#if (!$serviceOrgs.currency.code)
#set ($currency = "default")
#else
#set ($currency = $serviceOrgs.currency.code)
#end
		<cfPrice cfCurrCode=$esc.quote$currency$esc.quote>$serviceOrgs.price</cfPrice>
#end
	</cfOrgUnit_Srv>
	
#end
</cfSrv>

#end

#foreach( $equipment in $equipments )
<!-- A Equipment record -->
<cfEquip>
	<cfEquipId>$equipment.id</cfEquipId>
#if ($equipment.acronym && $equipment.acronym != "")
	<cfAcro>$cerif.xml($equipment.acronym)</cfAcro>
#end
#foreach( $equipmentName in $equipment.equipmentNames )
#if( $equipmentName.translation == "HUMAN" )
#set ($trans = "h")
#elseif( $equipmentName.translation == "ORIGINAL" )
#set ($trans = "o")
#else
#set ($trans = "m")
#end
	<cfName cfLangCode=$esc.quote$equipmentName.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($equipmentName.name)</cfName>
#end
#foreach( $equipmentDescription in $equipment.equipmentDescriptions )
#if( $equipmentDescription.translation == "HUMAN" )
#set ($trans = "h")
#elseif( $equipmentDescription.translation == "ORIGINAL" )
#set ($trans = "o")
#else
#set ($trans = "m")
#end
	<cfDescr cfLangCode=$esc.quote$equipmentDescription.language.code$esc.quote cfTrans=$esc.quote$trans$esc.quote>$cerif.xml($equipmentDescription.description)</cfDescr>
#end

#foreach( $equipmentResProd in $equipment.resultProducts_equipments )
	<cfResProd_Equip>
		<cfResProdId>$equipmentResProd.resultProduct.id</cfResProdId>		
		<cfClassId>$equipmentResProd.theClass.uuid</cfClassId>			
		<cfClassSchemeId>$equipmentResProd.theClass.scheme.uuid</cfClassSchemeId>
		<cfStartDate>$date.format('yyyy-MM-dd',$equipmentResProd.startDate)T$date.format('HH:mm:ss',$equipmentResProd.startDate)</cfStartDate>
		<cfEndDate>$date.format('yyyy-MM-dd',$equipmentResProd.endDate)T$date.format('HH:mm:ss',$equipmentResProd.endDate)</cfEndDate>
#if ($equipmentResProd.fraction)
		<cfFraction>$equipmentResProd.fraction</cfFraction>
#end
	</cfResProd_Equip>
	
#end
#foreach( $equipmentFederatedIdentifiers in $equipment.federatedIdentifiers )
	<cfFedId>
		<cfFedIdId>$equipmentFederatedIdentifiers.id</cfFedIdId>
#if ($equipmentFederatedIdentifiers.fedId && $equipmentFederatedIdentifiers.fedId != "")
		<cfFedId>$cerif.xml($equipmentFederatedIdentifiers.fedId)</cfFedId>
#end
#if ($equipmentFederatedIdentifiers.theClass)
		<cfClassId>$equipmentFederatedIdentifiers.theClass.uuid</cfClassId>
#end
#if ($equipmentFederatedIdentifiers.scheme)
		<cfClassSchemeId>$equipmentFederatedIdentifiers.scheme.uuid</cfClassSchemeId>
#end
#if ($equipmentFederatedIdentifiers.startDate)
		<cfStartDate>$date.format('yyyy-MM-dd',$equipmentFederatedIdentifiers.startDate)T$date.format('HH:mm:ss',$equipmentFederatedIdentifiers.startDate)</cfStartDate>
#end
#if ($equipmentFederatedIdentifiers.endDate)
		<cfEndDate>$date.format('yyyy-MM-dd',$equipmentFederatedIdentifiers.endDate)T$date.format('HH:mm:ss',$equipmentFederatedIdentifiers.endDate)</cfEndDate>
#end
	
#foreach( $federatedIdentifierClass in $equipmentFederatedIdentifiers.fedIds_classes )
		<cfFedId_Class>
			<cfClassId>$federatedIdentifierClass.theClass.uuid</cfClassId>	
			<cfClassSchemeId>$federatedIdentifierClass.theClass.scheme.uuid</cfClassSchemeId>
			<cfStartDate>$date.format('yyyy-MM-dd',$federatedIdentifierClass.startDate)T$date.format('HH:mm:ss',$federatedIdentifierClass.startDate)</cfStartDate>
			<cfEndDate>$date.format('yyyy-MM-dd',$federatedIdentifierClass.endDate)T$date.format('HH:mm:ss',$federatedIdentifierClass.endDate)</cfEndDate>
#if ($federatedIdentifierClass.fraction)
			<cfFraction>$federatedIdentifierClass.fraction</cfFraction>
#end
		</cfFedId_Class>
		
#end
#foreach( $federatedIdentifierService in $equipmentFederatedIdentifiers.services_fedIds )
		<cfFedId_Srv>
		 	<cfSrvId>$federatedIdentifierService.service.id</cfSrvId>
			<cfClassId>$federatedIdentifierService.theClass.uuid</cfClassId>	
			<cfClassSchemeId>$federatedIdentifierService.theClass.scheme.uuid</cfClassSchemeId>
			<cfStartDate>$date.format('yyyy-MM-dd',$federatedIdentifierService.startDate)T$date.format('HH:mm:ss',$federatedIdentifierService.startDate)</cfStartDate>
			<cfEndDate>$date.format('yyyy-MM-dd',$federatedIdentifierService.endDate)T$date.format('HH:mm:ss',$federatedIdentifierService.endDate)</cfEndDate>
#if ($federatedIdentifierService.fraction)
			<cfFraction>$federatedIdentifierService.fraction</cfFraction>
#end
		</cfFedId_Srv>
		
#end
	</cfFedId>
	
#end
</cfEquip>

#end

</CERIF>